# <4장: 테스트 구축하기>

## [4.1 자가 테스트 코드의 가치]

클래스마다 테스트 코드 갖춰야 함. 자동화!<br/>
잦은 테스트 코드 작성과 잦은 테스트 수행.<br/>
테스트 작성의 효율성은 디버깅 시간 단축과 버그 발견 시간 단축.<br/><br/>

테스트는 프로그래밍 시작 전 작성한다.<br/>
기능 추가에 무엇이 필요한지 파악 가능, 구현보다 인터페이스에 집중 가능.<br/><br/>

테스트 주도 개발(TDD)<br/>
1. 통과 못 할 테스트 작성(테스트)
2. 테스트 통과할 코드 작성(코딩)
3. 결과 코드 리팩터링 정리(리팩터링)

## [4.2 테스트할  샘플 코드]

코드는 성격에 따라 분리.<br/>
클래스 생성자, 접근자, 메소드, 파라메터 등의 복잡도 분석.<br/>

## [4.3 첫 번째 테스트]

0. 테스트 프레임워크 마련 (여기선 '모카' 사용)
(테스트는 it 블록에 담긴다.)
1. 테스트 필요 데이터/객체인 픽스처를 설정.
2. 픽스처의 속성 검증 (초기값에 기초, 기대값 설정)
(describe와 it 블록에 설명/식별용 문자열 추가 가능)
3. 패스 확인
4. 실패 또한 확인 (어느 테스트가 실패인지, 원인 단서는 무엇인지 제공)

자주 테스트 수행 - 추가 코드 이상유무 체크, 리팩터링 실수 체크.<br/>
실패한 테스트가 있으면 리팩터링으로 넘어가면 안 된다.<br/>

## [4.4 테스트 추가하기]

테스트의 목적은 버그 발견이므로,
단순한 코드는 제외하고, 위험요인 중심으로 작성.<br/>
(적은 수로 큰 효과 지향)<br/><br/>

1. 임시값으로 테스트 제대로 동작하는지 확인 -> 실제값
2. 고의적 오류값으로 테스트가 걸러내는지 확인.

참조 형태 픽스처 값 변경 이슈로 인하여, 개별적인 테스트에서 픽스처를 새로 만들어야 한다.<br/>
(beforeEach)(정말 문제가 될 때에만 공유픽스처)<br/>
beforeEach 사용만으로 표준(동일한) 픽스처를 사용함이 전달됨(각 it 블록에 지정하는 것보다 직관적).<br/>

## [4.5 픽스처 수정하기]

실제로는 사용자가 값을 변경하여 픽스처를 수정하기도.<br/>
고로 '설정-실행-검증'을 실시.<br/>
일반적으로는 it 구문 하나당 하나의 검증 지향(앞 실패 시, 뒤 확인 어려움).<br/>

## [4.6 경계 조건 검사하기]

일반적 범위 벗어날 때의 확인용 테스트도 필요.<br/>
(숫자라면 0, 음수 등)<br/>
특이 케이스 처리 방법 획득 및 문제 예방 가능.<br/>
테스트 시에는 작성한 코드를 파괴할 방법 모색.<br/>
위험한 부분에 집중.<br/>
