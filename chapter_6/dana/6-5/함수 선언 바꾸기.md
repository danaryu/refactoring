# 함수 선언 바꾸기

- 다른 이름
  - 함수 이름 바꾸기
  - 시그니처 바꾸기

## 배경

### 함수의 이름을 잘 만들자

- 함수 호출문만 보고도 무슨 일을 하는지 파악 가능

### 함수의 매개변수를 신경쓰자

- 매개변수는 함수가 외부 세계와 어우러지는 방식을 정의
- 매개변수는 함수를 사용하는 문맥을 설정한다.
  - 예: 전화번호 포매팅 함수(사람) → 전화번호 포매팅 함수(전화번호)
    - 매개변수 변경으로 함수의 활용범위를 넓힐 수 있다.
- 다른 모듈과의 결합을 제거할 수 있다.

## 절차

- 먼저 변경 사항을 살펴보고 함수 선언과 호출문들을 단번에 고칠 수 있을지 가늠해본다.
  - 가능한 경우에는 간단한 절차를
  - 불가능하다면 마이그레이션 절차를

> 다형성을 구현한 클래스의 경우, 메소드를 변경할 때는 다형 관계인 다른 클래스들에도 변경이 반영되어야 한다.

<br>

### 간단한 절차

1. 매개변수를 제거하려면 먼저 함수 본문에서 제거 대상 매개변수를 참조하는 곳은 없는지 확인한다.
2. 메소드 선언을 원하는 형태로 바꾼다.
3. 기존 메소드 선언을 참조하는 부분을 모두 찾아서 바뀐 형태로 수정한다.
4. 테스트한다.
   <br>

[함수 선언 바꾸기 코드 예시 - 간단한 절차](../6-4/example.js)<br>

- 함수 선언 수정 → 호출문을 모두 찾아 수정
- 매개변수 추가나 제거도 똑같이 처리
  - 함수를 호출하는 부분을 모두 찾은 뒤, 선언문을 바꾸고 호출문도 바꾼다.
  - 각 순서를 지키는 편이 좋다.
- 함수 이름 바꾸기 → 테스트 → 매개변수 추가 → 테스트
- 간단한 절차의 단점
  - 호출문과 선언문을 한 번에 수정해야 한다. (다형성일 경우 선언문 모두 수정 필요)
    - 수정할 부분이 많거나, 같은 이름이 여러 개일 경우 문제
- 간단한 절차를 따르다가 문제가 생겨도, 코드를 가장 최근의 정상 상태로 돌리고나서 마이그레이션 절차에 따라 다시 진행하면 된다!

<br>

[함수 선언 바꾸기 코드 예시3 - 매개변수 추가하기](../6-4/exampl03.js)<br>

<br>

### 마이그레이션 절차

1. 이어지는 추출 단계를 수월하게 만들어야 한다면 함수의 본문을 적절히 리팩터링한다.
2. 함수 본문을 새로운 함수로 추출한다.
   - 새로 만들 함수 이름이 기존 함수와 같은 경우엔 검색하기 쉬운 이름을 임시로 붙여둔다.
3. 추출한 함수에 매개변수를 추가해야 한다면, '간단한 절차'를 따라 추가한다.
4. 테스트한다.
5. 기존 함수를 인라인한다.
6. 이름을 임시로 붙여뒀다면 함수 선언 바꾸기를 한 번 더 적용해서 원래 이름으로 되돌린다.
7. 테스트한다.

[함수 선언 바꾸기 코드 예시2 - 마이그레이션 절차](../6-4/example02.js)<br>

- 함수 본문 전체를 새로운 함수로 추출
- 수정한 코드를 테스트 후 예전 함수를 인라인
- 하나를 변경할 때마다 테스트하면서 한 번에 하나씩 처리
- 모두 바꾼 경우 기존 함수 삭제

> - 기존 사용하던 함수를 새로운 함수로 추출 후 기존 함수를 deprecated(폐기 예정)표시
> - 클라이언트가 circum을 사용하지 않도록 기다린 후, 사용되는 경우가 없어지면 제거한다.
