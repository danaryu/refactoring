# 단계 쪼개기

## 배경

- 서로 다른 두 대상을 한꺼번에 다루는 코드 -> 각각을 별개 모듈로 나누는 방법을 모색
  - 각 코드간 결합도를 낮추기 위해
- 동작을 연이은 두 단계로 쪼개기
  - 입력이 처리 로직에 적합하지 않은 형태로 들어오는 경우
    - 입력값을 다루기 편한 형태로 가공 or 순차적 단계로 로직 분리 (각 단계는 서로 다른 일을 해야한다.)
  - 각각 다른 일을 하는 영역들을 모듈로 분리하자

## 절차

1. 두 번째 단계에 해당하는 코드를 독립 함수로 추출
2. 테스트하기
3. 중간 데이터 구조를 만들어서, 앞에서 추출한 함수의 인수로 추가
4. 테스트
5. 추출한 두 번째 단계의 매개변수를 하나씩 검토
   - 첫 번째 단게에서 사용되는 것은 중간 데이터 구조로 옮긴다.
   - 옮길때마다 테스트.
     - 두 번째 단계에서 사용하면 안되는 매개변수가 있는 경우 -> 각 매개변수를 사용한 결과를 중간 데이터 구조의 필드로 추출, 이 필드의 값을 설정하는 문장을 호출한 곳으로 옮긴다.
6. 첫 번째 단계 코드를 함수로 추출하면서 중간 데이터 구조 반환

## 예시

[단계 쪼개기 예시](../6-11/example.js)<br>
