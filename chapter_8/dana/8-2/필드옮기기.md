# 필드 옮기기
## 배경
- 데이터 구조 
  - 주어진 문제에 적합한 데이터 구조 활용 → 동작 코드는 자연스럽게, 단순하게, 직관적으로 짜여짐
  - 반대의 경우는 짜맞추려고 코드가 덕지덕지.. (..ㅎ)
- 현재 데이터 구조가 적절하지 않은 경우는 바로 고치자.
  - 어짜피 나중에 고치느라 겁나 고생하게 된다.
- 함수에 어떤 레코드를 넘길 때마다 또 다른 레코드의 필드도 함께 넘긴다면..?
  - 데이터 위치를 옮겨야한다.
- 함수에 항상 함께 전달되는 데이터 조각들은 한 레코드에 담는게 가장 좋다.
  - 상호 관계가 잘 드러나게 된다.
- 한 레코드를 변경할 때 다른 레코드 까지 변경해야 한다면..?
  - 필드 위치가 잘못된 것이다..
- 필드 옮기기 리팩터링은 더 큰 변경의 일환이다.
- 비단 레코드 뿐만이 아니라 클래스나 객체도 똑같다.
  - 모두모두 건강하게 관리되어야 한다.
  - 클래스를 사용하면 데이터를 옮기기 쉽다. (캡슐화된 채로 변경도 가능하다.)

## 절차 
1. 소스 필드가 캡슐화되어 있지 않으면 캡슐화한다.
2. 테스트한다.
3. 타겟 객체에 필드(와 접근자 메서드들)를 생성한다.
4. 정적 검사를 수행한다.
5. 소스 객체에서 타겟 객체를 참조할 수 있는지 확인한다.
   - 기존 필드나 메소드 중 타겟 객체를 넘기는 부분이 있을지도..
   - 없다면 쉽게 만들 수 있는지 파악한다.
   - 안된다면 타겟 객체를 저장할 새 필드를 소스 객체에 생성하자.
6. 접근자들이 타겟 필드를 사용하도록 수정한다.
    - 여러 소스에서 같은 타겟을 공유한다면, 세터를 수정하여 타겟과 소스필드 모두 갱신시키고
    - 일관성을 깨뜨리는 갱신을 검출하도록 Assertion을 추가하자.
    - 모든게 마무리되면, 접근자들이 타겟 필드를 사용하도록 수정한다.
7. 테스트한다.
8. 소스 필드 제거
9. 테스트

## 예시
[필드옮기기 예시](../8-2/example.js)<br>